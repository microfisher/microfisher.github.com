<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrading to Smartnode v1.3.x | Rocket Pool</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Rocket Pool Documentation - Decentralised ETH2 Proof of Stake Protocol">
    <meta name="theme-color" content="#e57147">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.75cec9a2.css" as="style"><link rel="preload" href="/assets/js/app.8dab053a.js" as="script"><link rel="preload" href="/assets/js/3.12e2602a.js" as="script"><link rel="preload" href="/assets/js/23.4e425876.js" as="script"><link rel="prefetch" href="/assets/js/1.db0f8477.js"><link rel="prefetch" href="/assets/js/10.93e661cb.js"><link rel="prefetch" href="/assets/js/100.4a3b3254.js"><link rel="prefetch" href="/assets/js/101.70092a0f.js"><link rel="prefetch" href="/assets/js/102.117b4113.js"><link rel="prefetch" href="/assets/js/103.9a53538f.js"><link rel="prefetch" href="/assets/js/104.ea6b820b.js"><link rel="prefetch" href="/assets/js/105.1a1012e2.js"><link rel="prefetch" href="/assets/js/106.f06794f5.js"><link rel="prefetch" href="/assets/js/107.cd450e91.js"><link rel="prefetch" href="/assets/js/108.9e3b8698.js"><link rel="prefetch" href="/assets/js/109.c9445cb2.js"><link rel="prefetch" href="/assets/js/11.37034cad.js"><link rel="prefetch" href="/assets/js/110.4688b55b.js"><link rel="prefetch" href="/assets/js/111.d7cb63c4.js"><link rel="prefetch" href="/assets/js/112.0c68352b.js"><link rel="prefetch" href="/assets/js/12.d5f09731.js"><link rel="prefetch" href="/assets/js/13.75185414.js"><link rel="prefetch" href="/assets/js/14.4f79624b.js"><link rel="prefetch" href="/assets/js/15.5e31743d.js"><link rel="prefetch" href="/assets/js/16.36f544f5.js"><link rel="prefetch" href="/assets/js/17.9117da0b.js"><link rel="prefetch" href="/assets/js/18.870fbb96.js"><link rel="prefetch" href="/assets/js/19.5dbb6b8e.js"><link rel="prefetch" href="/assets/js/20.0b7aba61.js"><link rel="prefetch" href="/assets/js/21.05b5aad4.js"><link rel="prefetch" href="/assets/js/22.ac8b3c2e.js"><link rel="prefetch" href="/assets/js/24.b3085771.js"><link rel="prefetch" href="/assets/js/25.ed624ff2.js"><link rel="prefetch" href="/assets/js/26.a9d96b3b.js"><link rel="prefetch" href="/assets/js/27.57a1fa4d.js"><link rel="prefetch" href="/assets/js/28.7fa3d2f3.js"><link rel="prefetch" href="/assets/js/29.83ee6233.js"><link rel="prefetch" href="/assets/js/30.60900fac.js"><link rel="prefetch" href="/assets/js/31.a7e8f130.js"><link rel="prefetch" href="/assets/js/32.d74da397.js"><link rel="prefetch" href="/assets/js/33.15fe159f.js"><link rel="prefetch" href="/assets/js/34.648bfe26.js"><link rel="prefetch" href="/assets/js/35.d157db4e.js"><link rel="prefetch" href="/assets/js/36.dd203ccf.js"><link rel="prefetch" href="/assets/js/37.68066095.js"><link rel="prefetch" href="/assets/js/38.d13298d3.js"><link rel="prefetch" href="/assets/js/39.51b5f7e1.js"><link rel="prefetch" href="/assets/js/4.93eafb42.js"><link rel="prefetch" href="/assets/js/40.7a88b34d.js"><link rel="prefetch" href="/assets/js/41.d595b285.js"><link rel="prefetch" href="/assets/js/42.8eb935aa.js"><link rel="prefetch" href="/assets/js/43.09d57c9a.js"><link rel="prefetch" href="/assets/js/44.9087b29a.js"><link rel="prefetch" href="/assets/js/45.3321eed8.js"><link rel="prefetch" href="/assets/js/46.44596f43.js"><link rel="prefetch" href="/assets/js/47.73c8c474.js"><link rel="prefetch" href="/assets/js/48.52075a18.js"><link rel="prefetch" href="/assets/js/49.fb6b52f1.js"><link rel="prefetch" href="/assets/js/5.f1d02ded.js"><link rel="prefetch" href="/assets/js/50.78269f80.js"><link rel="prefetch" href="/assets/js/51.b516b7f5.js"><link rel="prefetch" href="/assets/js/52.5713dc75.js"><link rel="prefetch" href="/assets/js/53.fe59dc31.js"><link rel="prefetch" href="/assets/js/54.7c03702d.js"><link rel="prefetch" href="/assets/js/55.39ab7f3a.js"><link rel="prefetch" href="/assets/js/56.2d39c3d5.js"><link rel="prefetch" href="/assets/js/57.98d3e67c.js"><link rel="prefetch" href="/assets/js/58.3d77d46d.js"><link rel="prefetch" href="/assets/js/59.2b2ea81d.js"><link rel="prefetch" href="/assets/js/6.5c392ee3.js"><link rel="prefetch" href="/assets/js/60.f414e060.js"><link rel="prefetch" href="/assets/js/61.5127c924.js"><link rel="prefetch" href="/assets/js/62.ad943789.js"><link rel="prefetch" href="/assets/js/63.a5c44dea.js"><link rel="prefetch" href="/assets/js/64.fac9dafb.js"><link rel="prefetch" href="/assets/js/65.e1920713.js"><link rel="prefetch" href="/assets/js/66.4b7060c3.js"><link rel="prefetch" href="/assets/js/67.1b42a542.js"><link rel="prefetch" href="/assets/js/68.a58c4dfa.js"><link rel="prefetch" href="/assets/js/69.3cfd86fc.js"><link rel="prefetch" href="/assets/js/7.ef04408a.js"><link rel="prefetch" href="/assets/js/70.26c981b9.js"><link rel="prefetch" href="/assets/js/71.2b1e967f.js"><link rel="prefetch" href="/assets/js/72.6318645f.js"><link rel="prefetch" href="/assets/js/73.3faeed28.js"><link rel="prefetch" href="/assets/js/74.2a11264d.js"><link rel="prefetch" href="/assets/js/75.a6a5ffb8.js"><link rel="prefetch" href="/assets/js/76.72a20d8b.js"><link rel="prefetch" href="/assets/js/77.b3cdf221.js"><link rel="prefetch" href="/assets/js/78.2953c168.js"><link rel="prefetch" href="/assets/js/79.91fd320a.js"><link rel="prefetch" href="/assets/js/8.90565e92.js"><link rel="prefetch" href="/assets/js/80.5843330d.js"><link rel="prefetch" href="/assets/js/81.14d99877.js"><link rel="prefetch" href="/assets/js/82.ba311f80.js"><link rel="prefetch" href="/assets/js/83.ec87add2.js"><link rel="prefetch" href="/assets/js/84.8e331b8d.js"><link rel="prefetch" href="/assets/js/85.e6f08881.js"><link rel="prefetch" href="/assets/js/86.74f07619.js"><link rel="prefetch" href="/assets/js/87.18c7d05f.js"><link rel="prefetch" href="/assets/js/88.1b3ea410.js"><link rel="prefetch" href="/assets/js/89.b4fcd16a.js"><link rel="prefetch" href="/assets/js/9.c5246f94.js"><link rel="prefetch" href="/assets/js/90.bc040e3f.js"><link rel="prefetch" href="/assets/js/91.f7fd0dba.js"><link rel="prefetch" href="/assets/js/92.e8817e0b.js"><link rel="prefetch" href="/assets/js/93.828f1258.js"><link rel="prefetch" href="/assets/js/94.313ccd10.js"><link rel="prefetch" href="/assets/js/95.74091f38.js"><link rel="prefetch" href="/assets/js/96.cd1cacbe.js"><link rel="prefetch" href="/assets/js/97.a16176b2.js"><link rel="prefetch" href="/assets/js/98.a8d2d226.js"><link rel="prefetch" href="/assets/js/99.0da86133.js">
    <link rel="stylesheet" href="/assets/css/0.styles.75cec9a2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo-small.png" alt="Rocket Pool" class="logo"> <span class="site-name can-hide">Rocket Pool</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/developers/" class="nav-link">
  For Developers
</a></div><div class="nav-item"><a href="https://www.rocketpool.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.com/invite/rocketpool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/rocket-pool/docs.rocketpool.net" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/developers/" class="nav-link">
  For Developers
</a></div><div class="nav-item"><a href="https://www.rocketpool.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.com/invite/rocketpool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/rocket-pool/docs.rocketpool.net" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/" aria-current="page" class="sidebar-link">Guides Overview</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Staking with Rocket Pool</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Running a Rocket Pool Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Testing Rocket Pool with the Prater Test Network</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/guides/node/mainnet.html" class="sidebar-link">Migrating from the Test Network to Mainnet</a></li><li><a href="/guides/node/v1.3-update.html" aria-current="page" class="active sidebar-link">Upgrading to Smartnode v1.3.x</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/node/v1.3-update.html#configuration-file-changes" class="sidebar-link">Configuration File Changes</a></li><li class="sidebar-sub-header"><a href="/guides/node/v1.3-update.html#installing-the-new-version" class="sidebar-link">Installing the New Version</a></li><li class="sidebar-sub-header"><a href="/guides/node/v1.3-update.html#configuring-the-smartnode-with-the-terminal-ui" class="sidebar-link">Configuring the Smartnode with the Terminal UI</a></li><li class="sidebar-sub-header"><a href="/guides/node/v1.3-update.html#starting-the-smartnode-stack" class="sidebar-link">Starting the Smartnode Stack</a></li><li class="sidebar-sub-header"><a href="/guides/node/v1.3-update.html#reverting-to-your-previous-configuration" class="sidebar-link">Reverting to your Previous Configuration</a></li></ul></li><li><a href="/guides/node/v1.5-update.html" class="sidebar-link">[BETA] The Rocket Pool Redstone Update</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="upgrading-to-smartnode-v1-3-x"><a href="#upgrading-to-smartnode-v1-3-x" class="header-anchor">#</a> Upgrading to Smartnode v1.3.x</h1> <p>Version 1.3.0 of the Smartnode stack brings some important changes that users should be aware of.
They are designed to significantly improve your node operator experience and address many of the features that our users have requested since Rocket Pool's launch.</p> <p>In this guide, we'll walk you through the process of migrating from an older version of the Smartnode from an older version to v1.3.x and beyond.</p> <h2 id="configuration-file-changes"><a href="#configuration-file-changes" class="header-anchor">#</a> Configuration File Changes</h2> <p>v1.3.0 introduces some significant changes in the way the Smartnode's configuration is managed.
If you've manually modified the Smartnode configuration before, you should be aware of the following changes:</p> <ul><li><p>The <code>config.yml</code> file has been removed. All of its information is now baked directly into the Smartnode stack, so users can no longer accidentally modify the file in a way that prevented the Smartnode from working properly.</p> <ul><li>All of the user-configurable parameters that were previously part of it are now settings in the new <code>service config</code> Terminal UI.</li></ul></li> <li><p>The <code>settings.yml</code> file has been replaced with a new file called <code>user-settings.yml</code>. This contains all of your settings for every user-configurable portion of the Smartnode.</p> <ul><li>This file is <strong>not meant to be modified directly</strong>. Modification should be done through the new <code>service config</code> Terminal UI instead.</li></ul></li> <li><p>The <code>chains</code> folder has been removed. The scripts for launching the Execution Client (ETH1), the Beacon Node, and the Validator Client now reside in the <code>scripts</code> folder.</p></li> <li><p>The <code>docker-compose</code> YAML files have been removed. Each container now gets its own file in the <code>templates</code> folder. Upon <code>rocketpool service start</code>, these templates are filled out with your settings and put into the <code>runtime</code> folder automatically.</p> <ul><li>Modifying the templates or runtime files is not recommended. Instead, fill in your container customizations using the <strong>override</strong> files for each container in the <code>override</code> folder. These files will overwrite the Docker files in <code>runtime</code>, so you are free to customize them as you see fit.</li> <li>The files in <code>override</code> <strong>will persist upon Smartnode upgrades and reinstallation</strong> so you only need to create them once.</li> <li>If you are interested in modifying the <code>docker-compose</code> files via this override mechanic, please see <a href="/guides/node/advanced-config.html#customizing-the-docker-compose-definition-files">this section</a></li></ul></li></ul> <h2 id="installing-the-new-version"><a href="#installing-the-new-version" class="header-anchor">#</a> Installing the New Version</h2> <p>Installing the new version should feel very familiar.</p> <p>Start by stopping the services and downloading the new CLI as usual:</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>Stop the Rocket Pool services:</p> <div class="language- extra-class"><pre class="language-text"><code>rocketpool service stop
</code></pre></div><p>Download the new Smartnode CLI for your system (choose from the tabs below):</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most normal machines):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-amd64 -O ~/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems (like the Raspberry Pi):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-arm64 -O ~/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most Macs):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems, such as the Mac mini with M1:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool
</code></pre></div></div> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><p>Now run the install command:</p> <div class="language- extra-class"><pre class="language-text"><code>rocketpool service install -d
</code></pre></div><p>The <code>-d</code> flag tells it to ignore system dependencies like Docker, since you already have them.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>As of v1.3.0, you <strong>no longer have to specify which network you want to install for!</strong>
The new Smartnode will know which network you're already using, and it will let you change your network dynamically using the new Terminal UI.</p></div></div></div></div></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>This will only update the Smartnode stack itself - it <strong>will not</strong> update your Execution (ETH1) and Consensus (ETH2) clients.
You will have to do this manually (see <a href="/guides/node/updates.html#manually-updating-the-eth1-or-eth2-client">the manual update guide</a> to learn how to do it).</p></div> <p>Stop the Rocket Pool services:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo systemctl stop rp-node rp-watchtower
</code></pre></div><p>Download the new Smartnode CLI and daemon binaries:</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most normal machines):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-amd64 -O /usr/local/bin/rocketpool

<span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-linux-amd64 -O /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems (like the Raspberry Pi):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-arm64 -O /usr/local/bin/rocketpool

<span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-linux-arm64 -O /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most Macs):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool

<span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems, such as the Mac mini with M1:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool

<span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpoold
</code></pre></div></div> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>As of v1.3.0, <code>config.yml</code> has been removed.
<strong>You no longer need to download the installer package and extract it.</strong></p></div> <p>Next, create a backup folder called <code>old_config_backup</code> in your Smartnode directory and move your old configuration files into it (<code>config.yml</code> and <code>settings.yml</code>).
The Smartnode will use these to migrate your settings to the new system.</p> <p>For example, if you followed the Native setup guide and your Smartnode directory is <code>/srv/rocketpool</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /srv/rocketpool
<span class="token function">mkdir</span> old_config_backup
<span class="token function">mv</span> config.yml old_config_backup
<span class="token function">mv</span> settings.yml old_config_backup
</code></pre></div><p>Now, modify the service definition files for <code>rp-node</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/rp-node.service
</code></pre></div><p>Replace the <code>ExecStart</code> line with the following:</p> <div class="language- extra-class"><pre class="language-text"><code>ExecStart=/home/ubuntu20/bin/rocketpoold --settings /srv/rocketpool/user-settings.yml node
</code></pre></div><p>Note that the <code>--config</code> flag has been removed, and <code>--settings</code> now points to <code>user-settings.yml</code>.
<strong>Don't worry that this file doesn't exist yet; it will be generated automatically in the next step.</strong></p> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>If you are an Oracle DAO member, you <em>must</em> repeat the above process for the <code>rp-watchtower</code> service as well.</p></div> <p>Finally, reload the service definitions:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl daemon-reload
</code></pre></div></div></div></div></div></div></div></div> <p>After the installation, all of your old configuration files will be moved to a folder named <code>old_config_backup</code> in your Smartnode directory (by default <code>~/.rocketpool/old_config_backup</code>).
You can find them there if you ever need to refer to them for any reason.</p> <p><strong>If you are looking for instructions on reverting to v1.2.4 from this backup, please scroll to the <a href="#reverting-to-your-previous-configuration">Reverting to Your Previous Configuration</a> section at the end of this page.</strong></p> <h2 id="configuring-the-smartnode-with-the-terminal-ui"><a href="#configuring-the-smartnode-with-the-terminal-ui" class="header-anchor">#</a> Configuring the Smartnode with the Terminal UI</h2> <p>Now that you have the new CLI and package installed, all of your previous settings have been preserved and migrated to the new system.
In the next step, you should run <code>rocketpool service config</code>.
This will look quite different compared to previous versions of this function; v1.3.0 introduces the <strong>Terminal UI</strong>: a terminal-based dynamic user interface for configuring your Smartnode.</p> <p>You must run it before starting the Docker containers after the migration process to view the configuration, verify that all of your changes were migrated successfully, and update any other settings that you desire.</p> <p>When you first run it, you will be prompted with this greeting screen (if you were using <strong>Docker or Hybrid mode</strong>):</p> <center><p><img src="/assets/img/tui-migrate.3ebc104a.png" alt=""></p></center> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p><strong>Native Mode users</strong> will see this screen with slightly different wording, which states the Smartnode is operating in Native mode.</p></div> <p>The TUI will begin with <strong>the Wizard</strong>, which allows you to quickly and easily change the most important parameters of the Smartnode (such as client mode and selection).</p> <p><strong>All of your previous settings should already be highlighted as you traverse through each page of the wizard so you don't have to remember what your previous configuration was off the top of your head.</strong></p> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p><strong>For a detailed walkthrough of this Wizard, please visit the following pages:</strong></p> <ul><li><p>For <strong>Docker Mode</strong>, please visit <a href="/guides/node/config-docker.html">the new Docker configuration guide</a>.</p></li> <li><p><strong>Hybrid Mode</strong> users: Hybrid Mode is now a <strong>first-class feature</strong> of the Smartnode and configuring it is <em>much</em> easier than it used to be. Please visit <a href="/guides/node/config-docker.html">the new Docker configuration guide</a> and follow it. When you are prompted to choose an Execution client mode and Consensus client mode, choose <strong>Externally Managed</strong> for them accordingly.</p></li> <li><p>For <strong>Native Mode</strong>, please visit <a href="/guides/node/config-native.html">the new Native configuration guide</a>.</p></li></ul></div> <p>Navigate through this wizard and confirm that all of your settings are correct.</p> <p>Once you are done, you will have the option of <strong>reviewing all of the settings before saving</strong> if you desire.
This includes settings that the Wizard didn't cover, such as the <strong>RPL claim gas threshold</strong> or your <strong>max number of Geth peers</strong> as examples.</p> <p>The <strong>main settings screen</strong>, which you should also look at to confirm your previous settings, will look like this (for Docker and Hybrid mode users):</p> <center><p><img src="/assets/img/tui-settings-home.b1129c21.png" alt=""></p></center> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p><strong>Native Mode users</strong> will see a slightly different screen that is unique to Native mode and only presents the settings that are relevant for it.</p></div> <p>Feel free to explore this new UI and adjust any settings you see fit.
Use the <code>Arrow Keys</code> to navigate, and press <code>Enter</code> to enter a category or confirm any changes to a setting that you make.</p> <p>Press <code>Esc</code> when you're finished editing a category to return to this home screen.</p> <p>When you're ready to save your changes and start the Smartnode stack, simply press <code>Tab</code> to move down to the buttons at the bottom of the screen, select <code>Review Changes and Save</code> (by making it green via the arrow keys).
Press <code>Enter</code> to be brought to the <strong>Review Page</strong>, where you can see everything you've changed since the last time you ran <code>rocketpool service config</code>.</p> <p>Confirm all of your change are present, and then press <code>Enter</code> again to save them.
The screen will show you which containers need to be restarted for the changes to apply, though since you're migrating, you've already turned the containers off and they will all be restarted anyway.</p> <h2 id="starting-the-smartnode-stack"><a href="#starting-the-smartnode-stack" class="header-anchor">#</a> Starting the Smartnode Stack</h2> <p>Once you've saved your configuration, the terminal will ask if you want to restart the containers automatically (unless you're using Native mode).
If you do not / cannot allow them to start automatically, you can start them up manually with the following commands:</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><div class="language- extra-class"><pre class="language-text"><code>rocketpool service start
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl start rp-node rp-watchtower
</code></pre></div></div></div></div> <p>Once they're up, you can verify that everything is working as intended.</p> <p>Use the <code>rocketpool service version</code> command to check that you have the correct version of the Smartnode and client containers:</p> <div class="language- extra-class"><pre class="language-text"><code>$ rocketpool service version

Your Smartnode is currently using the Prater Test Network.

Rocket Pool client version: 1.3.0-rc1
Rocket Pool service version: 1.3.0-rc1
Selected Eth 1.0 client: Geth (Locally managed)
	Image: ethereum/client-go:v1.10.16
Selected Eth 2.0 client: Nimbus (Locally managed)
	Image: statusim/nimbus-eth2:multiarch-v22.3.0
</code></pre></div><p>Use the <code>rocketpool service logs eth1</code> and <code>rocketpool service logs eth2</code> commands to watch the logs for your Execution client (formerly ETH1 client) and your Consensus client (formerly ETH2 client).
Look out for any errors and <a href="https://discord.com/invite/rocketpool" target="_blank" rel="noopener noreferrer">please visit our Discord server for help<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> if you encounter them.</p> <h2 id="reverting-to-your-previous-configuration"><a href="#reverting-to-your-previous-configuration" class="header-anchor">#</a> Reverting to your Previous Configuration</h2> <p>If, for any reason, you need to revert back to v1.2.4 of the Smartnode stack, don't worry!
All of your old configuration files have been preserved in a backup directory and can easily be retrieved to restore your previous setup.</p> <p>Select which mode you use from the tabs below and follow the instructions.</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>Start by replacing the CLI with the v1.2.4 CLI for your system:</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most normal machines):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-linux-amd64 -O ~/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems (like the Raspberry Pi):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-linux-arm64 -O ~/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most Macs):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems, such as the Mac mini with M1:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool
</code></pre></div></div> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><p>Next, copy all of your old configuration files from the <code>old_config_backup</code> folder back into the Smartnode's folder:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> ~/.rocketpool
<span class="token function">cp</span> -r old_config_backup/*
</code></pre></div><p>Now, all you need to do is restart the Docker containers:</p> <div class="language- extra-class"><pre class="language-text"><code>rocketpool service start
</code></pre></div><p>Done! Your old configuration is back.</p></div></div></div></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>Stop the Rocket Pool services:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo systemctl stop rp-node rp-watchtower
</code></pre></div><p>Download the Smartnode CLI and daemon binaries for v1.2.4:</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most normal machines):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-linux-amd64 -O /usr/local/bin/rocketpool

<span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-daemon-linux-amd64 -O /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems (like the Raspberry Pi):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-linux-arm64 -O /usr/local/bin/rocketpool

<span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4rocketpool-daemon-linux-arm64 -O /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>x64</code> systems (most Macs):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool

<span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-daemon-darwin-amd64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpoold
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p>For <code>arm64</code> systems, such as the Mac mini with M1:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-cli-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpool

<span class="token function">curl</span> -L https://github.com/rocket-pool/smartnode-install/releases/download/v1.2.4/rocketpool-daemon-darwin-arm64 <span class="token operator">&gt;</span> /usr/local/bin/rocketpoold
</code></pre></div></div> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><p>Copy the previous settings files back into your Smartnode directory:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /srv/rocketpool
<span class="token function">cp</span> old_config_backup *
</code></pre></div><p>Now, revert the service definition files for <code>rp-node</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/rp-node.service
</code></pre></div><p>Replace the <code>ExecStart</code> line with the following:</p> <div class="language- extra-class"><pre class="language-text"><code>ExecStart=/usr/local/bin/rocketpoold --config /srv/rocketpool/config.yml --settings /srv/rocketpool/settings.yml node
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>If you are an Oracle DAO member, you <em>must</em> repeat the above process for the <code>rp-watchtower</code> service as well.</p></div> <p>Finally, reload the service definitions and restart the services:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl daemon-reload

<span class="token function">sudo</span> systemctl start rp-node rp-watchtower
</code></pre></div><p>Done! Your old configuration is back.</p></div></div></div></div></div></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/rocket-pool/docs.rocketpool.net/edit/main/src/guides/node/v1.3-update.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guides/node/mainnet.html" class="prev">
        Migrating from the Test Network to Mainnet
      </a></span> <span class="next"><a href="/guides/node/v1.5-update.html">
        [BETA] The Rocket Pool Redstone Update
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8dab053a.js" defer></script><script src="/assets/js/3.12e2602a.js" defer></script><script src="/assets/js/23.4e425876.js" defer></script>
  </body>
</html>
