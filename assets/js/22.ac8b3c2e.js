(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{368:function(e,t,a){e.exports=a.p+"assets/img/tui-ec-container-tag.b1f1cef7.png"},369:function(e,t,a){e.exports=a.p+"assets/img/tui-cc-container-tag.da2e074b.png"},488:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"checking-for-updates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#checking-for-updates"}},[e._v("#")]),e._v(" Checking for Updates")]),e._v(" "),t("p",[e._v("One of the responsibilities of a node operator is making sure your system is up to date with the latest security patches.\nAutomatic updates are convenient but can interfere with your node operation, so it may be preferable to run them manually.\nIn either case, "),t("strong",[e._v("you must make sure that your machine is regularly patched!")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Most of the time, updating will not require your system to be down for more than a few minutes.\nYou might be concerned that such downtime will negatively affect your Beacon Chain balance.\nRest assured, the penalty for being offline for such a short period of time is "),t("strong",[e._v("completely negligible")]),e._v(".")]),e._v(" "),t("p",[e._v("Each attestation you miss will penalize you for slightly less than the amount you'd earn from a successful attestation.\nAs a rule of thumb, if you're offline for an hour, you will earn it all back after being online for an hour again.")]),e._v(" "),t("p",[e._v("Also note that there is "),t("strong",[e._v("absolutely no chance")]),e._v(" that you will be "),t("em",[e._v("slashed")]),e._v(" by going offline for a short time.\nSlashing only occurs if you attack the network, and going offline for maintenance does not count as attacking the network.")]),e._v(" "),t("p",[t("strong",[e._v("Please keep your systems up to date - don't worry about the downtime penalties!")])])]),e._v(" "),t("h2",{attrs:{id:"updating-your-operating-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-your-operating-system"}},[e._v("#")]),e._v(" Updating your Operating System")]),e._v(" "),t("p",[e._v("You should frequently check your Operating System's package manager or update service to ensure that quickly apply any new important security patches.\nThe exact instructions vary for each Operating System and can be found with your system's documentation, but here are a few examples.")]),e._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Ubuntu"}},[t("p",[e._v("In a terminal, type the following:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo apt update\n")])])]),t("p",[e._v("This will access the package servers and check to see if any of your installed packages have new versions available.\nIf updates are available, the output will look like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Fetched 3974 kB in 2s (1641 kB/s)                                 \nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\n12 packages can be upgraded. Run 'apt list --upgradable' to see them.\n")])])]),t("p",[e._v("You can install the updates with the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo apt dist-upgrade\n")])])]),t("p",[e._v("This will show you the list of packages that are about to be updated, and if the total installation size is large enough, it will show you the size and prompt you to confirm that you accept:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("12 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 51.3 MB of archives.\nAfter this operation, 52.2 kB of additional disk space will be used.\nDo you want to continue? [Y/n]\n")])])]),t("p",[e._v("Ensure that you have enough space available to do this, then press "),t("code",[e._v("y")]),e._v(" and "),t("code",[e._v("Enter")]),e._v(" to begin the update process.")]),e._v(" "),t("p",[e._v("Once the progress bar is finished and you're dropped back into the terminal prompt, run the following command to clean up any old versions of packages that were just replaced:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo apt autoremove\n")])])]),t("p",[e._v("Next, check if your system needs to be rebooted:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cat /var/run/reboot-required\n")])])]),t("p",[e._v("If the above command prints "),t("code",[e._v("*** System restart required ***")]),e._v(", then you should restart your machine to finish applying the updates when you are able:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo reboot\n")])])]),t("p",[e._v("Rocket Pool will gracefully shut down and automatically start back up with the system once it reboots.")])]),e._v(" "),t("Tab",{attrs:{label:"macOS"}},[t("p",[e._v("To update the OS packages, use the UI to select "),t("code",[e._v("Apple -> Software Update")]),e._v(".")]),e._v(" "),t("p",[e._v("To udate packages themselves, the easiest way is via "),t("code",[e._v("homebrew")]),e._v(" in the terminal:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("brew update && brew upgrade\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"updating-the-smartnode-stack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-smartnode-stack"}},[e._v("#")]),e._v(" Updating the Smartnode Stack")]),e._v(" "),t("p",[e._v("Occasionally, Rocket Pool will release a new version of the Smartnode stack.\nUpdates can contain new versions of the CLI or the Rocket Pool Docker containers, as well as new versions of the Execution and Consensus clients.")]),e._v(" "),t("p",[e._v("The most consistent way to find out about new releases is to subscribe to the Rocket Pool Discord server; they will always be posted in the Releases channel and you will receive a notification.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Note that running "),t("code",[e._v("apt update")]),e._v(" will not update the node software.\nThis must be done manually using the steps below.")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("When you have completed the Smartnode upgrade, the Grafana dashboard will still indicate there is still an update available.\nIt will automatically clear within a day when the system next auto-checks for updates.")]),e._v(" "),t("p",[e._v("If you want to clear it immediately after the update, simply run:\n"),t("code",[e._v("sudo apt update")])])]),e._v(" "),t("p",[e._v("The steps to upgrade depend on which mode your node uses. Select from the options below:")]),e._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux (Docker or Hybrid Mode)"}},[t("p",[e._v("Stop the Rocket Pool services:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service stop\n")])])]),t("p",[e._v("Download the new Smartnode CLI:")]),e._v(" "),t("p",[e._v("For "),t("code",[e._v("x64")]),e._v(" systems (most normal machines):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-amd64 -O ~/bin/rocketpool\n")])])]),t("p",[e._v("For "),t("code",[e._v("arm64")]),e._v(" systems (like the Raspberry Pi):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-arm64 -O ~/bin/rocketpool\n")])])]),t("p",[e._v("Now run the install command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service install -d\n")])])]),t("p",[e._v("The "),t("code",[e._v("-d")]),e._v(" flag tells it to ignore system dependencies like Docker, since you already have them.")]),e._v(" "),t("p",[e._v("If you'd like to see what's changed, open the Settings Manager - the Review Page will show you what's new:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service config\n")])])]),t("p",[e._v("When you're done, start Rocket Pool up again:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service start\n")])])]),t("p",[e._v("Finally, check the version to make sure the CLI and Smartnode stack are both up to date:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service version\n\nRocket Pool client version: 1.0.0-rc3\nRocket Pool service version: 1.0.0-rc3\nSelected Eth 1.0 client: Geth (rocketpool/client-go:v1.10.4)\nSelected Eth 2.0 client: Nimbus (statusim/nimbus:v1.4.0)\n")])])]),t("p",[e._v("Both the client and service should match the new release version.")])]),e._v(" "),t("Tab",{attrs:{label:"Linux (Native Mode)"}},[t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("This will only update the Smartnode stack itself - it "),t("strong",[e._v("will not")]),e._v(" update your Execution or Consensus clients.\nYou will have to do this manually (see the next section below).")])]),e._v(" "),t("p",[e._v("Stop the Rocket Pool services:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo systemctl stop rp-node rp-watchtower\n")])])]),t("p",[e._v("Download the new Smartnode CLI and back up the old CLI and daemon binaries if you need to bring them back:")]),e._v(" "),t("p",[e._v("For "),t("code",[e._v("x64")]),e._v(" systems (most normal machines):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo mv /usr/local/bin/rocketpool /usr/local/bin/rocketpool_bak\n\nsudo mv /usr/local/bin/rocketpoold /usr/local/bin/rocketpoold_bak\n\nsudo wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-amd64 -O /usr/local/bin/rocketpool\n\nsudo wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-linux-amd64 -O /usr/local/bin/rocketpoold\n\nsudo chmod +x /usr/local/bin/rocketpool /usr/local/bin/rocketpoold\n")])])]),t("p",[e._v("For "),t("code",[e._v("arm64")]),e._v(" systems (like the Raspberry Pi):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo mv /usr/local/bin/rocketpool /usr/local/bin/rocketpool_bak\n\nsudo mv /usr/local/bin/rocketpoold /usr/local/bin/rocketpoold_bak\n\nsudo wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-arm64 -O /usr/local/bin/rocketpool\n\nsudo wget https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-daemon-linux-arm64 -O /usr/local/bin/rocketpoold\n\nsudo chmod +x /usr/local/bin/rocketpool /usr/local/bin/rocketpoold\n")])])]),t("p",[e._v("If you'd like to see what's changed, open the Settings Manager - the Review Page will show you what's new:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rp service config\n")])])]),t("p",[e._v("When you're done, start Rocket Pool up again:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo systemctl start rp-node rp-watchtower\n")])])]),t("p",[e._v("Finally, check the version to make sure the CLI and Smartnode stack are both up to date:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service version\n\nRocket Pool client version: 1.0.0-rc3\nRocket Pool service version: 1.0.0-rc3\nSelected Eth 1.0 client: Geth (rocketpool/client-go:v1.10.4)\nSelected Eth 2.0 client: Nimbus (statusim/nimbus:v1.4.0)\n")])])]),t("p",[e._v("Both the client and service should match the new release version.")])]),e._v(" "),t("Tab",{attrs:{label:"macOS (Docker or Hybrid Mode)"}},[t("p",[e._v("Stop the Rocket Pool services:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service stop\n")])])]),t("p",[e._v("Download the new Smartnode CLI:")]),e._v(" "),t("p",[e._v("For "),t("code",[e._v("x64")]),e._v(" systems (most Macs):")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-amd64 -O /usr/local/bin/rocketpool\n")])])]),t("p",[e._v("For "),t("code",[e._v("arm64")]),e._v(" systems, such as the Mac mini with M1:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-arm64 -O /usr/local/bin/rocketpool\n")])])]),t("p",[e._v("Now run the install command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service install -d\n")])])]),t("p",[e._v("The "),t("code",[e._v("-d")]),e._v(" flag tells it to ignore system dependencies like Docker, since you already have them.")]),e._v(" "),t("p",[e._v("If you'd like to see what's changed, open the Settings Manager - the Review Page will show you what's new:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service config\n")])])]),t("p",[e._v("When you're done, start Rocket Pool up again:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service start\n")])])]),t("p",[e._v("Finally, check the version to make sure the CLI and Smartnode stack are both up to date:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service version\n\nRocket Pool client version: 1.0.0-rc3\nRocket Pool service version: 1.0.0-rc3\nSelected Eth 1.0 client: Geth (rocketpool/client-go:v1.10.4)\nSelected Eth 2.0 client: Nimbus (statusim/nimbus:v1.4.0)\n")])])]),t("p",[e._v("Both the client and service should match the new release version.")])])],1),e._v(" "),t("h2",{attrs:{id:"manually-updating-the-execution-or-consensus-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#manually-updating-the-execution-or-consensus-client"}},[e._v("#")]),e._v(" Manually Updating the Execution or Consensus Client")]),e._v(" "),t("p",[e._v("Each new release of the Smartnode stack will come with updated references to the latest compatible versions to the Execution and Consensus Docker containers.\nIn some cases, however, you might want to upgrade one of those clients "),t("em",[e._v("before")]),e._v(" waiting for a new Smartnode stack release.\nThis section will show you how to do just that.")]),e._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Docker Mode"}},[t("p",[e._v("Updating to new client versions is easy in Docker mode.")]),e._v(" "),t("p",[e._v("Start by opening the Settings Manager:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service config\n")])])]),t("p",[e._v("To change the Execution client version, go to the "),t("strong",[e._v("Execution Client (ETH1)")]),e._v(" category.\nModify the "),t("strong",[e._v("Container Tag")]),e._v(" setting:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:a(368),alt:""}})])]),e._v(" "),t("p",[e._v("To change the Consensus client version, go to the "),t("strong",[e._v("Consensus Client (ETH2)")]),e._v(" category.\nModify the "),t("strong",[e._v("Container Tag")]),e._v(" setting:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:a(369),alt:""}})])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("This process is slightly different for "),t("strong",[e._v("Prysm")]),e._v(", because the Smartnode stack needs to use the "),t("em",[e._v("DEBUG")]),e._v(" images that Prysm provides instead of the normally versioned ones.\nFor help upgrading Prysm manually, please visit the "),t("code",[e._v("smart-nodes")]),e._v(" channel in the Rocket Pool Discord.")])])],1),e._v(" "),t("p",[e._v("When you're happy with your changes, save and exit as usual.\nThe Smartnode will offer to restart all of the affected containers automatically.")]),e._v(" "),t("Tab",{attrs:{label:"Native Mode"}},[t("p",[e._v("First, shut down your Execution client, Beacon Node, and/or Validator client service depending on what you'd like to update.\nFor example, shutting down Geth:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo systemctl stop geth\n")])])]),t("p",[e._v("Next, download the latest binary release from the vendor of your client (or build it from source) and replace the old binary with the new one.\nWe recommend you "),t("strong",[e._v("move the old binary to a backup location")]),e._v(" instead of overwriting it, just in case the new client has problems.")]),e._v(" "),t("p",[e._v("Finally, start the client service again - for example, starting Geth:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo systemctl start geth\n")])])]),t("p",[e._v("You should follow the log scripts closely after the upgrade to ensure that the new client works as expected.")])])],1)],1)}),[],!1,null,null,null);t.default=o.exports}}]);