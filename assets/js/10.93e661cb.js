(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{295:function(e,t,n){e.exports=n.p+"assets/img/tui-select-ec.190f462d.png"},296:function(e,t,n){e.exports=n.p+"assets/img/tui-confirm-ec.57fdc88a.png"},297:function(e,t,n){e.exports=n.p+"assets/img/tui-select-cc.7bc92aff.png"},298:function(e,t,n){e.exports=n.p+"assets/img/tui-checkpoint-sync.56da83e8.png"},299:function(e,t,n){e.exports=n.p+"assets/img/tui-confirm-cc.dada87e8.png"},460:function(e,t,n){"use strict";n.r(t);var o=n(0),i=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"changing-execution-or-consensus-clients"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changing-execution-or-consensus-clients"}},[e._v("#")]),e._v(" Changing Execution or Consensus Clients")]),e._v(" "),t("p",[e._v("Under normal circumstances, you will likely just select an Execution and Consensus client when you first create your Rocket Pool node and will let them happily run for the life of your Node.\nHowever, there are a few situations where you may want to change your client selection.\nHere are a few examples:")]),e._v(" "),t("ul",[t("li",[e._v("Your client gains a "),t("a",{attrs:{href:"https://clientdiversity.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("supermajority"),t("OutboundLink")],1),e._v(" share on the Execution or Beacon chains, and you want to change for the overall health of the network")]),e._v(" "),t("li",[e._v("A bug causes your client to stop functioning correctly, and you need to get back online quickly to resume validation duties")]),e._v(" "),t("li",[e._v("You want to try a new feature that a different client offers")]),e._v(" "),t("li",[e._v("A different client is better suited to your node's hardware (e.g. some clients are better on ARM systems than others)")])]),e._v(" "),t("p",[e._v("Luckily, the Smartnode stack makes changing clients extremely easy.\nAll it takes is a few changes in the Configuration TUI, and some optional extra commands to back up your existing client data before changing clients.")]),e._v(" "),t("h2",{attrs:{id:"changing-execution-clients"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changing-execution-clients"}},[e._v("#")]),e._v(" Changing Execution Clients")]),e._v(" "),t("p",[e._v("Prior to changing your Execution client, it's worth noting the following points:")]),e._v(" "),t("ul",[t("li",[e._v("Chain data "),t("strong",[e._v("is not shared")]),e._v(" between clients. Your new client will need to resync the Mainnet chain data, which can take some time (though each client supports snap sync, which the Smartnode uses to speed up resyncing).")]),e._v(" "),t("li",[e._v("By default, the Smartnode will leave your old client's chain data on your drive in case you want to revert back to your old Execution client and pick up where you left off. You may want to "),t("strong",[e._v("export it to a different location")]),e._v(" and delete it to free up space prior to changing clients, since Execution clients can use hundreds of gigabytes. We have steps below on how to do this.")]),e._v(" "),t("li",[e._v("While your new client is resyncing, most of the Smartnode CLI functions will be offline since they rely on the Execution client. "),t("strong",[e._v("You should have a fallback Execution client available before doing this to mitigate the downtime on your Smartnode.")])])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("After the Execution and Beacon chains become unified later this year (known as The Merge), light clients such as "),t("strong",[e._v("Pocket")]),e._v(" and "),t("strong",[e._v("Infura")]),e._v(" can "),t("em",[e._v("no longer be used by validators")]),e._v("!\nAfter The Merge, your only option for a fallback is to have a second full Execution client running on another machine (or in the cloud) that you own and trust.")]),e._v(" "),t("p",[e._v("The time between now and The Merge is an "),t("strong",[e._v("excellent time")]),e._v(" to switch to a client with a smaller market share for the health of the network, and use Pocket or Infura as a fallback Execution client while they're still available.")])]),e._v(" "),t("h3",{attrs:{id:"optional-export-your-execution-client-s-database"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#optional-export-your-execution-client-s-database"}},[e._v("#")]),e._v(" (Optional) Export your Execution Client's Database")]),e._v(" "),t("p",[e._v("The first step in the process is an optional one: if you like, you can export your existing chain data for your current Execution client.\nThis will let you free up valuable disk space on your node for your new Execution client, and you can keep the old chain data around in case you want to revert back to the old client and pick up where you left off.")]),e._v(" "),t("p",[e._v("To do this, start by "),t("strong",[e._v("mounting the storage medium you want to export the data to")]),e._v(".\nFor example, this could be an external hard drive.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("HINT")]),e._v(" "),t("p",[e._v("If you don't know how to mount external devices on Linux, it's easy!\nPlug the device into your node, and follow "),t("a",{attrs:{href:"https://www.addictivetips.com/ubuntu-linux-tips/mount-external-hard-drives-in-linux/",target:"_blank",rel:"noopener noreferrer"}},[e._v("a guide like this"),t("OutboundLink")],1),e._v(" to learn how to mount it.")])]),e._v(" "),t("p",[e._v("Once you have it mounted, note its mount path.\nFor this example, let's assume that we want to store the chain data in a folder called "),t("code",[e._v("/mnt/external-drive")]),e._v(" which the external device is mounted to.\nReplace this with your actual mount path wherever you see it below.")]),e._v(" "),t("p",[e._v("Now, run the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service export-eth1-data /mnt/external-drive\n")])])]),t("p",[e._v("This will check that your target folder is reachable and has enough free space to store the chain data.\nThe output will look like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("This will export your execution client's chain data to an external directory, such as a portable hard drive.\nIf your execution client is running, it will be shut down.\nOnce the export is complete, your execution client will restart automatically.\n\nYou have a fallback execution client configured (http://<some address>:8545).\nRocket Pool (and your consensus client) will use that while the main client is offline.\n\nChain data size:       26 GiB\nTarget dir free space: 287 GiB\nYour target directory has enough space to store the chain data.\n\nNOTE: Once started, this process *will not stop* until the export is complete - even if you exit the command with Ctrl+C.\nPlease do not exit until it finishes so you can watch its progress.\n\nAre you sure you want to export your execution layer chain data? [y/n]\n")])])]),t("p",[e._v("As you can see, the chain data is 26 GB (for the Prater testnet; the Ethereum mainnet will be an order of magnitude larger) and the external folder has 287 GiB free so exporting can continue.")]),e._v(" "),t("p",[e._v("When you're ready, enter "),t("code",[e._v("y")]),e._v(" here and press "),t("code",[e._v("Enter")]),e._v(".\nThis will stop your Execution client and begin copying its chain data to your target folder.\nYou will see the progress of each individual file go past the screen as it runs.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("It's important that you "),t("em",[e._v("do not")]),e._v(" exit the terminal while this is running.\nIf you do, the copy will continue to run in the background but you won't be able to follow its progress!")])]),e._v(" "),t("p",[e._v("Once it's finished, it will automatically restart your Execution client container.")]),e._v(" "),t("p",[t("strong",[e._v("Note that your existing chain data is not deleted from your node after the export is complete!")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("If you have existing chain data for your new client and want to import it back into your node, simply run the same steps but use the following command instead:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service import-eth1-data /mnt/external-drive\n")])])])]),e._v(" "),t("h3",{attrs:{id:"change-your-selected-execution-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#change-your-selected-execution-client"}},[e._v("#")]),e._v(" Change your Selected Execution Client")]),e._v(" "),t("p",[e._v("To change your selected client, run "),t("code",[e._v("rocketpool service config")]),e._v(" to enter the configuration UI.\nNavigate to the "),t("code",[e._v("Execution Client (ETH1)")]),e._v(" section, and select the "),t("code",[e._v("Execution Client")]),e._v(" dropdown:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:n(295),alt:""}})])]),e._v(" "),t("p",[e._v("Open the dropdown with "),t("code",[e._v("Enter")]),e._v(", use the arrow keys to navigate to your client of choice, and press "),t("code",[e._v("Enter")]),e._v(" again to confirm the selection.")]),e._v(" "),t("p",[e._v("Note that each client has its own unique options, so you may see some additional settings appear in this screen after you select a different client.\nFeel free to explore through them to see how they affect things.")]),e._v(" "),t("p",[e._v("When you're happy with your choice, press "),t("code",[e._v("Esc")]),e._v(" to return to the main menu, then "),t("code",[e._v("Tab")]),e._v(" to highlight the "),t("code",[e._v("Review Changes and Save")]),e._v(" button.\nYou will be presented with the review screen, which will show your client selection change:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:n(296),alt:""}})])]),e._v(" "),t("p",[e._v("Press "),t("code",[e._v("Enter")]),e._v(" to accept the changes, and you're done!\nYour new Execution client will begin syncing immediately.\nAs usual, you can follow it with "),t("code",[e._v("rocketpool service logs eth1")]),e._v(".\n"),t("strong",[e._v("We recommend you do this to verify there are no errors, and that it works properly.")])]),e._v(" "),t("h3",{attrs:{id:"recommended-remove-your-old-chain-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recommended-remove-your-old-chain-data"}},[e._v("#")]),e._v(" (Recommended) Remove your Old Chain Data")]),e._v(" "),t("p",[e._v("This is not a required step, but we "),t("strong",[e._v("strongly recommend")]),e._v(" you remove the chain data from your old client now that you've switched to a new one so you can free up disk space for it.")]),e._v(" "),t("p",[e._v("To do this, simply run the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rocketpool service resync-eth1\n")])])]),t("p",[e._v("This will delete all of your Execution client data and start it over.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Since you just selected a new Execution client, it won't be affected by this - essentially, all it will do is delete your old chain data.\nYou should do this as soon as possible after switching clients to prevent unnecessary loss of progress on your new client.")])]),e._v(" "),t("h2",{attrs:{id:"changing-consensus-clients"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changing-consensus-clients"}},[e._v("#")]),e._v(" Changing Consensus Clients")]),e._v(" "),t("p",[e._v("Changing Consensus clients is even easier than Execution clients, thanks to "),t("RouterLink",{attrs:{to:"/guides/node/config-docker.html#beacon-chain-checkpoint-syncing-with-infura"}},[e._v("Checkpoint Sync")]),e._v(".\nThis feature lets you immediately sync a new Consensus client with the network, so there's no need to preserve your old chain data.")],1),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[t("strong",[e._v("Prysm")]),e._v(" is currently in the process of adding support for Checkpoint Sync.\nIt will be enabled in a future version, and we do not recommend you change clients to Prysm until it supports Checkpoint Sync.")])]),e._v(" "),t("p",[e._v("Start by using the "),t("code",[e._v("rocketpool service config")]),e._v(" UI and navigating to the "),t("code",[e._v("Consensus Client (ETH2)")]),e._v(" section.\nNext, select the "),t("code",[e._v("Consensus Client")]),e._v(" dropdown:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:n(297),alt:""}})])]),e._v(" "),t("p",[e._v("Open the dropdown with "),t("code",[e._v("Enter")]),e._v(", use the arrow keys to navigate to your client of choice, and press "),t("code",[e._v("Enter")]),e._v(" again to confirm the selection.")]),e._v(" "),t("p",[e._v("Note that each client has its own unique options, so you may see some additional settings appear in this screen after you select a different client.\nFeel free to explore through them to see how they affect things.")]),e._v(" "),t("p",[e._v("Next, verify that you're using a Checkpoint Sync provider:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:n(298),alt:""}})])]),e._v(" "),t("p",[e._v("If you don't have a Checkpoint Sync provider configured, "),t("RouterLink",{attrs:{to:"/guides/node/config-docker.html#beacon-chain-checkpoint-syncing-with-infura"}},[e._v("you can easily use Infura to do it for free")]),e._v("!")],1),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[t("strong",[e._v("This will work even after The Merge")]),e._v(" - Checkpoint Syncing from Infura is "),t("em",[e._v("not")]),e._v(" related to using Infura as an Execution client, and it will continue to be supported.")])]),e._v(" "),t("p",[e._v("When you're happy with your choice, press "),t("code",[e._v("Esc")]),e._v(" to return to the main menu, then "),t("code",[e._v("Tab")]),e._v(" to highlight the "),t("code",[e._v("Review Changes and Save")]),e._v(" button.\nYou will be presented with the review screen, which will show your client selection change:")]),e._v(" "),t("center",[t("p",[t("img",{attrs:{src:n(299),alt:""}})])]),e._v(" "),t("p",[e._v("Press "),t("code",[e._v("Enter")]),e._v(" to accept the changes, and you're done!\nYour new Consensus client will begin syncing immediately.\nAs usual, you can follow it with "),t("code",[e._v("rocketpool service logs eth2")]),e._v(".\n"),t("strong",[e._v("We recommend you do this to verify there are no errors, and that it works properly.")])])],1)}),[],!1,null,null,null);t.default=i.exports}}]);