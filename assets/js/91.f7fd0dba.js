(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{465:function(t,e,o){"use strict";o.r(e);var a=o(0),s=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"creating-a-standard-rocket-pool-node-with-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-standard-rocket-pool-node-with-docker"}},[t._v("#")]),t._v(" Creating a Standard Rocket Pool Node with Docker")]),t._v(" "),e("p",[t._v("In this section, we will walk through the process of installing the Rocket Pool Smartnode stack using the standard "),e("a",{attrs:{href:"https://www.docker.com/resources/what-container",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),e("OutboundLink")],1),t._v("-based setup.\nThis will install and configure everything you need to run a complete node, including:")]),t._v(" "),e("ul",[e("li",[t._v("The Rocket Pool "),e("strong",[t._v("Smartnode")]),t._v(" software")]),t._v(" "),e("li",[t._v("An "),e("strong",[t._v("Execution")]),t._v(" (formerly ETH1) client of your choice, or a connection to an existing client you already manage")]),t._v(" "),e("li",[t._v("A "),e("strong",[t._v("Consensus")]),t._v(" (formerly ETH2) client of your choice, or a connection to an existing client you already manage")]),t._v(" "),e("li",[t._v("A "),e("strong",[t._v("Validator")]),t._v(" client that will handle your Beacon Chain validation duties")]),t._v(" "),e("li",[t._v("(Optionally) a "),e("strong",[t._v("monitoring stack")]),t._v(" for capturing performance and health metrics")])]),t._v(" "),e("p",[t._v("All you need to do is tell it what you want to run!")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("The below instructions require you to use your system's "),e("strong",[t._v("terminal")]),t._v(" to enter and execute commands.\nIf you are connected to the node machine via SSH, you are already doing this.\nIf you are on the node machine and using a Desktop UI, you will need to open a terminal window to execute the following commands.\nRefer to your OS's instructions to learn how to do this if you are unfamiliar.")])]),t._v(" "),e("h2",{attrs:{id:"process-overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#process-overview"}},[t._v("#")]),t._v(" Process Overview")]),t._v(" "),e("p",[t._v("At a high level, here's what is involved in installing Rocket Pool:")]),t._v(" "),e("ol",[e("li",[t._v("Download the Rocket Pool command-line interface (CLI)")]),t._v(" "),e("li",[t._v("Use the CLI to install the Smartnode stack")]),t._v(" "),e("li",[t._v("Configure the Smartnode stack with an easy-to-use UI in the terminal")]),t._v(" "),e("li",[t._v("Done!")])]),t._v(" "),e("h2",{attrs:{id:"downloading-the-rocket-pool-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#downloading-the-rocket-pool-cli"}},[t._v("#")]),t._v(" Downloading the Rocket Pool CLI")]),t._v(" "),e("p",[t._v("The instructions for downloading the CLI vary based on your Operating System.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("You must perform the following instructions "),e("strong",[t._v("on the machine you will use for your Rocket Pool node.")]),t._v("\nIf you are not using a keyboard and monitor directly connected to your node machine, you will need to access it remotely (e.g. via SSH) and run these commands on it through that remote connection.")])]),t._v(" "),e("Tabs",{attrs:{type:"border-card"}},[e("Tab",{attrs:{label:"Linux"}},[e("p",[t._v("On Linux, start by creating a new folder that will hold the CLI application:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ~/bin\n")])])]),e("p",[t._v("Next, download the CLI.\nThis depends on what architecture your system uses.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("If you do not know your CPU architecture, you can run the following command to find it:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -m\n")])])]),e("p",[t._v("The output of this command will print your architecture.\n"),e("strong",[t._v("Note that "),e("code",[t._v("x86_64")]),t._v(" is the same as "),e("code",[t._v("x64")]),t._v(" and "),e("code",[t._v("amd64")]),t._v(".")]),t._v(" "),e("strong",[t._v("Note that "),e("code",[t._v("aarch64")]),t._v(" is the same as "),e("code",[t._v("arm64")]),t._v(".")])])]),t._v(" "),e("p",[t._v("For "),e("code",[t._v("x64")]),t._v(" systems (most normal computers):")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-amd64 -O ~/bin/rocketpool\n")])])]),e("p",[t._v("For "),e("code",[t._v("arm64")]),t._v(" systems, such as the Raspberry Pi:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-linux-arm64 -O ~/bin/rocketpool\n")])])]),e("p",[t._v("Mark it as executable, so it has permissions to run:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x ~/bin/rocketpool\n")])])]),e("p",[t._v("Next, "),e("strong",[t._v("log out and log back in")]),t._v(" (or close SSH and reconnect), or simply restart.\nThis is because the path that you saved the CLI to ("),e("code",[t._v("~/bin")]),t._v(") may not be in your system's "),e("code",[t._v("PATH")]),t._v(" variable (the list of places your system searches for executables) yet.\nLogging out and back in will put it there.")]),t._v(" "),e("p",[t._v("Now, test running it with the "),e("code",[t._v("--version")]),t._v(" flag.\nYou should see output like this:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool --version\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool version 1.3.0\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("If you see an error message like this,")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-bash: /home/user/rocketpool: cannot execute binary file: Exec format error\n")])])]),e("p",[t._v("it means that you downloaded the wrong version above.\nPlease check if your system is "),e("strong",[t._v("x64")]),t._v(" or "),e("strong",[t._v("arm64")]),t._v(" using the command in the tip above, and download the appropriate version.\nIf your system is neither of those, then you will not be able to run Rocket Pool.")])])]),t._v(" "),e("Tab",{attrs:{label:"macOS"}},[e("p",[t._v("On macOS, download the CLI for your machine with the following command.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("If you do not know your CPU architecture, you can run the following command to find it:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -m\n")])])]),e("p",[t._v("The output of this command will print your architecture.\n"),e("strong",[t._v("Note that "),e("code",[t._v("x86_64")]),t._v(" is the same as "),e("code",[t._v("x64")]),t._v(" and "),e("code",[t._v("amd64")]),t._v(".")]),t._v(" "),e("strong",[t._v("Note that "),e("code",[t._v("aarch64")]),t._v(" is the same as "),e("code",[t._v("arm64")]),t._v(".")])])]),t._v(" "),e("p",[t._v("For "),e("code",[t._v("x64")]),t._v(" systems (most Macs):")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-amd64 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /usr/local/bin/rocketpool\n")])])]),e("p",[t._v("For "),e("code",[t._v("arm64")]),t._v(" systems, such as the Mac mini with M1:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L https://github.com/rocket-pool/smartnode-install/releases/latest/download/rocketpool-cli-darwin-arm64 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /opt/homebrew/bin/rocketpool\n")])])]),e("p",[t._v("For "),e("code",[t._v("x64")]),t._v(" systems (most Macs):\nMark it as executable, so it has permissions to run:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/rocketpool\n")])])]),e("p",[t._v("For "),e("code",[t._v("arm64")]),t._v(" systems, such as the Mac mini with M1:\nMark it as executable, so it has permissions to run:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /opt/homebrew/bin/rocketpool\n")])])]),e("p",[t._v("Now, test running it with the "),e("code",[t._v("--version")]),t._v(" flag.\nYou should see output like this:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool --version\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool version 1.3.0\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("If you see an error message like this,")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/usr/local/bin/rocketpool: Exec format error\n")])])]),e("p",[t._v("it means that you downloaded the wrong version above.\nPlease check if your system is x64 or arm64 using the command in the tip above, and download the appropriate version.\nIf your system is neither of those, then you will not be able to run Rocket Pool.")])])])],1),t._v(" "),e("h2",{attrs:{id:"installing-the-smartnode-stack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installing-the-smartnode-stack"}},[t._v("#")]),t._v(" Installing the Smartnode Stack")]),t._v(" "),e("p",[t._v("Now that you have the CLI installed, you can deploy the Smartnode stack.\nThis will prepare your system with Docker, "),e("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker-compose"),e("OutboundLink")],1),t._v(", and load the Smartnode files so they're ready to go.\nIt won't actually run anything yet; that comes later.")]),t._v(" "),e("p",[t._v("To deploy the Smartnode stack, you will need to run the following command on your node machine (either by logging in locally, or connecting remotely such as through SSH):")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool service install\n")])])]),e("p",[t._v("This will grab the latest version of the Smartnode stack and set it up.\nYou should see output like this ("),e("em",[t._v("above some release notes for the latest version which will be printed at the end")]),t._v("):")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Step 5 of 8: Checking for existing installation...\nStep 5 of 8: Backing up configuration settings to user-settings-backup.yml...\nStep 6 of 8: Creating Rocket Pool user data directory...\nStep 7 of 8: Downloading Rocket Pool package files...\nStep 8 of 8: Copying package files to Rocket Pool user data directory...\n\nThe Rocket Pool service was successfully installed!\n")])])]),e("p",[t._v("If there aren't any error messages, then the installation was successful.\nBy default, it will be put into the "),e("code",[t._v("~/.rocketpool")]),t._v(" directory inside of your user account's home folder.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("Note that the Smartnode installer cannot install "),e("code",[t._v("docker")]),t._v(" and "),e("code",[t._v("docker-compose")]),t._v(" on all platforms automatically.\nIf you receive an error message like this during the installation:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Automatic dependency installation for the Mint operating system is not supported.\nPlease install docker and docker-compose manually, then try again with the '-d' flag to skip OS dependency installation.\nBe sure to add yourself to the docker group with 'sudo usermod -aG docker $USER' after installing docker.\nLog out and back in, or restart your system after you run this command.\n")])])]),e("p",[t._v("Then you simply have to install those two things manually.")]),t._v(" "),e("p",[t._v("Docker provides common "),e("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("install instructions here"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Docker-compose provides common "),e("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("install instructions here"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Once both are installed, make sure you give your user account permission to use Docker:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("usermod")]),t._v(" -aG "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v("\n")])])]),e("p",[t._v("Finally, re-run the installer with the "),e("code",[t._v("-d")]),t._v(" flag to skip Docker installation:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rocketpool service install -d\n")])])])]),t._v(" "),e("p",[t._v("After this, "),e("strong",[t._v("log out and back in or restart your SSH session")]),t._v(" for the settings to take effect.")]),t._v(" "),e("p",[t._v("Once this is finished, the Smartnode stack will be ready to run.")]),t._v(" "),e("h2",{attrs:{id:"configuring-docker-s-storage-location"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-docker-s-storage-location"}},[t._v("#")]),t._v(" Configuring Docker's Storage Location")]),t._v(" "),e("p",[t._v("By default, Docker will store all of its container data on your operating system's drive.\nIn some cases, this is not what you want.\nFor example, on "),e("strong",[t._v("Raspberry Pi")]),t._v(" systems, all of the chain data should be stored on the external SSD, not on the MicroSD card.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("If you are fine with this default behavior, skip down to the next section.")])]),t._v(" "),e("p",[t._v("To do this, create a new file called "),e("code",[t._v("/etc/docker/daemon.json")]),t._v(" as the root user:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("sudo nano /etc/docker/daemon.json\n")])])]),e("p",[t._v("This will be empty at first, which is fine. Add this as the contents:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n    "data-root": "<your external mount point>/docker"\n}\n')])])]),e("p",[t._v("where "),e("code",[t._v("<your external mount point>")]),t._v(" is the directory that your other drive is mounted to.\nIn the case of Raspberry Pi users, it should be "),e("code",[t._v("/mnt/rpdata")]),t._v(" or whatever folder you set up in the "),e("RouterLink",{attrs:{to:"/guides/node/local/prepare-pi.html"}},[t._v("Preparing a Raspberry Pi")]),t._v(" section.")],1),t._v(" "),e("p",[t._v("Press "),e("code",[t._v("Ctrl+O, Enter")]),t._v(" to save the file, and "),e("code",[t._v("Ctrl+X, Enter")]),t._v(" to exit the editor.")]),t._v(" "),e("p",[t._v("Next, make the folder:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("sudo mkdir -p <your external mount point>/docker\n")])])]),e("p",[t._v("(Again, for example, this would be "),e("code",[t._v("/mnt/rpdata/docker")]),t._v(" for Raspberry Pi users.)")]),t._v(" "),e("p",[t._v("Now, restart the docker daemon so it picks up on the changes:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("sudo systemctl restart docker\n")])])]),e("p",[t._v("After that, Docker will store its data on your desired disk.")]),t._v(" "),e("h2",{attrs:{id:"configuring-the-smartnode-stack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-smartnode-stack"}},[t._v("#")]),t._v(" Configuring the Smartnode Stack")]),t._v(" "),e("p",[t._v("The next step in the installation process is to do an initial configuration of your node.\nMove on to the "),e("RouterLink",{attrs:{to:"/guides/node/config-docker.html"}},[t._v("Configuring the Smartnode Stack")]),t._v(" section for a walkthrough of this process.")],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);