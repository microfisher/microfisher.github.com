(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{357:function(e,t,a){e.exports=a.p+"assets/img/Htop.9756f25f.png"},358:function(e,t,a){e.exports=a.p+"assets/img/Beaconchain.e2127620.png"},359:function(e,t,a){e.exports=a.p+"assets/img/uptimerobot.9d42ade4.png"},360:function(e,t,a){e.exports=a.p+"assets/img/rp-metrics-dashboard.com.b6c6a238.png"},361:function(e,t,a){e.exports=a.p+"assets/img/rocketscan.dev.71d03228.png"},477:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"monitoring-your-node-s-performance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-your-node-s-performance"}},[e._v("#")]),e._v(" Monitoring your Node's Performance")]),e._v(" "),t("p",[e._v("Now that your node is up and running and you have one or more minipools attached, you'll need to keep an eye on everything to make sure it's running smoothly.")]),e._v(" "),t("p",[e._v("You can track your machine either:")]),e._v(" "),t("ol",[t("li",[e._v("Directly by tapping into your machine metrics")]),e._v(" "),t("li",[e._v("Indirectly through the use of third party tools")])]),e._v(" "),t("p",[e._v("It is recommended to use a combination of both depending on your needs.")]),e._v(" "),t("h2",{attrs:{id:"directly-tracking-your-machine-s-status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#directly-tracking-your-machine-s-status"}},[e._v("#")]),e._v(" Directly Tracking your Machine's Status")]),e._v(" "),t("p",[e._v("With respect to your machine's status, there are a few useful metrics you'll probably want to keep an eye on:")]),e._v(" "),t("ul",[t("li",[e._v("CPU Usage")]),e._v(" "),t("li",[e._v("Free RAM remaining")]),e._v(" "),t("li",[e._v("Swap space usage (if you enabled it)")]),e._v(" "),t("li",[e._v("Remaining free disk space")]),e._v(" "),t("li",[e._v("Network I/O (if your ISP imposes a data cap)")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("The sections below show you some ways to monitor things, but they require you to be logged into the terminal of your machine.\nThere is a better, much more convenient and much nicer-looking method that uses a "),t("RouterLink",{attrs:{to:"/guides/node/grafana.html"}},[e._v("Grafana web dashboard")]),e._v(" but it is still under development.\nStay tuned for the completion of that section!")],1)]),e._v(" "),t("h3",{attrs:{id:"cpu-ram-and-swap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu-ram-and-swap"}},[e._v("#")]),e._v(" CPU, RAM, and Swap")]),e._v(" "),t("p",[e._v("The first three can be easily viewed with the "),t("code",[e._v("htop")]),e._v(" program.\nThis will give you a nice live view into your system resources, as shown by this screenshot from a Raspberry Pi:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("htop\n")])])]),t("p",[t("img",{attrs:{src:a(357),alt:"Htop screenshot on raspberry pi"}})]),e._v(" "),t("p",[e._v("On the top display with the bars, the numbered bars each refer to a CPU core's current usage.")]),e._v(" "),t("p",[t("code",[e._v("Mem")]),e._v(" shows you how much RAM you're currently using (in this screenshot, 1.75 GB) and how much you have total (3.70 GB).")]),e._v(" "),t("p",[t("code",[e._v("Swp")]),e._v(" shows you how much swap space you're using (85.8 MB) and how much you have total (12.0 GB).")]),e._v(" "),t("p",[e._v("On the bottom table, each row represents a process.\nYour Execution (ETH1) and Consensus (ETH2) clients will likely be on top (in this case, Geth and Nimbus) which you can see in the rightmost column labeled "),t("code",[e._v("Command")]),e._v(".")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("RES")]),e._v(" column shows you how much RAM each process is taking - in this screenshot, Geth is taking 748 MB and Nimbus is taking 383 MB.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("CPU%")]),e._v(" column shows you how much CPU power each process is consuming.\n100% represents a single core, so if it's over 100%, that means it's using a lot from multiple cores (like Geth is here, with 213%).")]),e._v(" "),t("h3",{attrs:{id:"remaining-free-disk-space"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#remaining-free-disk-space"}},[e._v("#")]),e._v(" Remaining Free Disk Space")]),e._v(" "),t("p",[e._v("Keeping an eye on how much disk space you have free is easy to do with the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("df -h\n")])])]),t("p",[e._v("This will provide output similar to the following example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Filesystem        Size  Used Avail Use% Mounted on\n...\n/dev/mmcblk0p2     30G   12G   16G  43% /\n...\n/dev/sda1         1.8T  852G  981G  47% /mnt/rpdata\n...\n")])])]),t("p",[e._v("For conventional setups where you have one drive that stores both your Operating System and your Execution (ETH1) and Consensus (ETH2) chain data, you just need to look at the entry that has "),t("code",[e._v("/")]),e._v(" in the "),t("code",[e._v("Mounted on")]),e._v(" column.\nThis represents your main disk.\nIf that ever looks like it's running out of space (say, 80% used or so), then you need to start thinking about doing some cleanup.\nFor example, if you're running Geth, you may want to look at "),t("RouterLink",{attrs:{to:"/guides/node/geth-pruning.html"}},[e._v("how to prune it")]),e._v(" to clear up some space.")],1),e._v(" "),t("p",[e._v("For setups that store the Execution (ETH1) and Consensus (ETH2) chain data on a separate drive (such as the Raspberry Pi, which the above example comes from), you'll want to look at the row that has your chain data folder in the "),t("code",[e._v("Mounted on")]),e._v(" column as well.\nIn this example we mounted an external SSD to "),t("code",[e._v("/mnt/rpdata")]),e._v(", so we'll have to keep an eye on it to make sure it doesn't grow too large either.")]),e._v(" "),t("h3",{attrs:{id:"network-i-o-and-data-usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#network-i-o-and-data-usage"}},[e._v("#")]),e._v(" Network I/O and Data Usage")]),e._v(" "),t("p",[e._v("If you want to track how much network I/O your system uses over time, you can install a nice utility called "),t("code",[e._v("vnstat")]),e._v(".\nHere's an example of installing it on a Ubuntu / Debian system:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo apt install vnstat\n")])])]),t("p",[e._v("To run it, do this (assuming "),t("code",[e._v("eth0")]),e._v(" is the name of the network interface you use for your Internet connection):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("vnstat -i eth0\n")])])]),t("p",[e._v("This won't work right away because it needs time to collect data about your system, but as the days and weeks pass, it will end up looking like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ vnstat -i eth0\nDatabase updated: 2021-06-28 22:00:00\n\n   eth0 since 2021-01-29\n\n          rx:  3.33 TiB      tx:  4.25 TiB      total:  7.58 TiB\n\n   monthly\n                     rx      |     tx      |    total    |   avg. rate\n     ------------------------+-------------+-------------+---------------\n       2021-05    550.19 GiB |  855.34 GiB |    1.37 TiB |    4.51 Mbit/s\n       2021-06    498.13 GiB |  784.43 GiB |    1.25 TiB |    4.57 Mbit/s\n     ------------------------+-------------+-------------+---------------\n     estimated    535.31 GiB |  842.97 GiB |    1.35 TiB |\n\n   daily\n                     rx      |     tx      |    total    |   avg. rate\n     ------------------------+-------------+-------------+---------------\n     yesterday     18.35 GiB |   32.00 GiB |   50.36 GiB |    5.01 Mbit/s\n         today     18.26 GiB |   30.52 GiB |   48.78 GiB |    5.29 Mbit/s\n     ------------------------+-------------+-------------+---------------\n     estimated     19.92 GiB |   33.30 GiB |   53.22 GiB |\n")])])]),t("p",[e._v("This will let you keep tabs on your total network usage, which might be helpful if your ISP imposes a data cap.")]),e._v(" "),t("p",[e._v("Note that most modern systems more commonly use other network interfaces like eno0 and enp0s31f6 and not eth0.\nIf you need to check your network interface, run the following command:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v(" /sys/class/net\n")])])]),t("p",[e._v("Ethernet (hard-wire) devices usually start with "),t("code",[e._v("e")]),e._v(", such as the examples above.\nWireless devices usually start with "),t("code",[e._v("w")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"third-party-performance-monitoring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#third-party-performance-monitoring"}},[e._v("#")]),e._v(" Third-Party Performance Monitoring")]),e._v(" "),t("p",[e._v("The best monitoring uses a Swiss-cheese model: every tool has holes, but if you stack them on top of each-other there is less of a chance anything falls through and catches you by surprise.")]),e._v(" "),t("p",[e._v("Please note that these third-party tools are used by the Rocket Pool community, but are not officially endorsed or supported by the Rocket Pool team.\nIf you have a tool suggestion, or are a tool owner, you are very welcome to add a pull request with details on your tool.")]),e._v(" "),t("h3",{attrs:{id:"beaconcha-in-website-using-the-beacon-chain-as-a-metric-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beaconcha-in-website-using-the-beacon-chain-as-a-metric-source"}},[e._v("#")]),e._v(" Beaconcha.in Website: Using the Beacon Chain as a Metric Source")]),e._v(" "),t("p",[e._v("The "),t("a",{attrs:{href:"https://beaconcha.in",target:"_blank",rel:"noopener noreferrer"}},[e._v("Beaconcha.in"),t("OutboundLink")],1),e._v(" block explorer website and app provide a way to track your validator's performance by looking at it's on-chain activity.\nThey also have the option to receive "),t("a",{attrs:{href:"https://beaconcha.in/user/notifications",target:"_blank",rel:"noopener noreferrer"}},[e._v("email notifications"),t("OutboundLink")],1),e._v(" for significant events like downtime.\nNavigate to their site, and enter the public key for your validator in the search box on the top of the screen.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("If you forgot your validator's public key, you can easily retrieve it with the command "),t("code",[e._v("rocketpool minipool status")]),e._v(".")])]),e._v(" "),t("p",[e._v("If everything is set up right, you should see something like this:\n"),t("img",{attrs:{src:a(358),alt:""}})]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("The above link is for the "),t("strong",[e._v("mainnet")]),e._v(" version of Beaconcha.in.\nIf you're running on the Prater Testnet, use "),t("a",{attrs:{href:"https://prater.beaconcha.in",target:"_blank",rel:"noopener noreferrer"}},[e._v("this link instead"),t("OutboundLink")],1),e._v("!")])]),e._v(" "),t("p",[e._v("This is a record of all of the Beacon Chain activity for your validator.\nYou can use it to check your validator's balance on the Beacon Chain to watch it grow over time and calculate your APY.")]),e._v(" "),t("p",[e._v("You can also use it to quickly gauge if your validator is alive and running correctly.\nIf it is, all of the attestations should say "),t("code",[e._v("Attested")]),e._v(" for their "),t("strong",[e._v("Status")]),e._v(", and ideally all of the "),t("strong",[e._v("Opt. Incl. Dist.")]),e._v(" should be 0 (though an occasional 1 or 2 is fine).")]),e._v(" "),t("p",[e._v("If there are lots of blocks that say "),t("code",[e._v("Missed")]),e._v(" on them, then your validator is not working properly.\nYou should check the logs of the "),t("code",[e._v("eth1")]),e._v(", "),t("code",[e._v("eth2")]),e._v(", and "),t("code",[e._v("validator")]),e._v(" services with "),t("code",[e._v("rocketpool service logs ...")]),e._v(" if you're using Docker or Hybrid mode (or the corresponding log scripts if you're using Native mode) to look for problems.")]),e._v(" "),t("p",[t("strong",[e._v("You should pin this tab or create a bookmark with it so you can quickly jump to it and check the status of your validator.")])]),e._v(" "),t("h4",{attrs:{id:"using-beaconcha-in-to-monitor-multiple-minipools"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-beaconcha-in-to-monitor-multiple-minipools"}},[e._v("#")]),e._v(" Using Beaconcha.in to Monitor Multiple Minipools")]),e._v(" "),t("p",[e._v("Beaconcha.in has a "),t("a",{attrs:{href:"https://beaconcha.in/dashboard",target:"_blank",rel:"noopener noreferrer"}},[e._v("dashboard view"),t("OutboundLink")],1),e._v(" that allows you to monitor multiple validators or minipools at once.\nSimply add your validator indices one at a time. If you have a lot of minipools, you can run:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("rocketpool minipool status "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" Validator.index "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" -F "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('" "')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print $3}'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("paste")]),e._v(" -s -d, -\n")])])]),t("p",[e._v("to get a comma-separated list, and place it in the URL bar like so: "),t("code",[e._v("https://beaconcha.in/dashboard?validators=123456,123457")])]),e._v(" "),t("h3",{attrs:{id:"beaconcha-in-app-validator-overview-and-push-notifications"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#beaconcha-in-app-validator-overview-and-push-notifications"}},[e._v("#")]),e._v(" Beaconcha.in App: Validator Overview and Push Notifications")]),e._v(" "),t("p",[e._v('The Beaconcha.in website is a great way to view metrics and set up email alerts.\nTheir mobile app has a more "at-a-glance" nature.\nIt also features a push notification service that includes some useful alerts like:')]),e._v(" "),t("ol",[t("li",[e._v("Notifications of issues like missed attestations")]),e._v(" "),t("li",[e._v("Notifications of Rocket Pool reward rounds")]),e._v(" "),t("li",[e._v("Over/under-collateralisation of the RPL on your node")])]),e._v(" "),t("p",[e._v("Note that the app has a free version, and paid options with convenience features like homescreen widgets.")]),e._v(" "),t("h3",{attrs:{id:"uptimerobot-port-scanning-for-uptime"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uptimerobot-port-scanning-for-uptime"}},[e._v("#")]),e._v(" Uptimerobot: Port-scanning for Uptime")]),e._v(" "),t("p",[e._v("The "),t("a",{attrs:{href:"https://uptimerobot.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Uptimerobot"),t("OutboundLink")],1),e._v(" service is a simple service that scans an IP address for an open port.\nIf your machine becomes unavailable on the port you specified, Uptimerobot can send you a notification that there is an issue.\nThe service was a wide variety of notification options including email, push notification, SMS, phone call, and webhooks.")]),e._v(" "),t("p",[e._v("The setup screen looks something like this:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(359),alt:""}})]),e._v(" "),t("p",[e._v("The IP to monitor is the external IP of your node, which you can find by logging into your node by "),t("code",[e._v("ssh")]),e._v(" or physically, and opening "),t("a",{attrs:{href:"https://icanhazip.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("icanhazip.com"),t("OutboundLink")],1),e._v(" in a browser or running the following command in your terminal:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" icanhazip.com\n")])])]),t("p",[e._v("The port to monitor depends on your node setup; users running the typical Smartnode installation will likely have forwarded ports 30303 and 9001 for the Execution and Consensus clients respectively, so these are good choices for uptime monitoring.")]),e._v(" "),t("h3",{attrs:{id:"rocketpool-metrics-dashboards"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rocketpool-metrics-dashboards"}},[e._v("#")]),e._v(" Rocketpool Metrics Dashboards")]),e._v(" "),t("p",[e._v("There are multiple community-lead initiatives to provide an overview of your node performance, as well as the Rocket Pool network as a whole.")]),e._v(" "),t("p",[e._v("Community member "),t("code",[e._v("VGR")]),e._v(" made the "),t("a",{attrs:{href:"https://www.rp-metrics-dashboard.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("rp-metrics-dashboard.com"),t("OutboundLink")],1),e._v(" where you can view in-depth statistics on your node, the network and even the "),t("a",{attrs:{href:"https://www.rp-metrics-dashboard.com/highscores",target:"_blank",rel:"noopener noreferrer"}},[e._v("high scores"),t("OutboundLink")],1),e._v(" or the best performing nodes:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(360),alt:"Rocketpool Metrics Dashboard screenshot"}})]),e._v(" "),t("p",[e._v("A more minimalist tool is the "),t("a",{attrs:{href:"https://rocketscan.dev/",target:"_blank",rel:"noopener noreferrer"}},[e._v("rocketscan.dev"),t("OutboundLink")],1),e._v(" tool made another community member.\nIt features detailed network and node metrics, including a timeline of your node activity.")]),e._v(" "),t("p",[t("img",{attrs:{src:a(361),alt:"Rocketscan screenshot"}})]),e._v(" "),t("h3",{attrs:{id:"scripting-with-pushover-advanced"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scripting-with-pushover-advanced"}},[e._v("#")]),e._v(" Scripting with Pushover (advanced)")]),e._v(" "),t("p",[e._v("The "),t("a",{attrs:{href:"https://pushover.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pushover"),t("OutboundLink")],1),e._v(" service allows you to send yourself push notifications.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("This is an advanced activity to undertake.\nIt can be helpful if you are familiar with shell scripting, but is not recommended if you are not comfortable in a shell environment.")])]),e._v(" "),t("p",[e._v("To get started with Pushover:")]),e._v(" "),t("ol",[t("li",[e._v("Create an account at "),t("a",{attrs:{href:"https://pushover.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("pushover.net"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://pushover.net/apps/build",target:"_blank",rel:"noopener noreferrer"}},[e._v("Create an API token"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Install the Pushover mobile app and/or browser extenion")]),e._v(" "),t("li",[e._v("Call the Pushover API for any action you care about")])]),e._v(" "),t("p",[e._v("Calling the Pushover API to send you a push notification is done through a "),t("code",[e._v("curl")]),e._v(" call structured as such:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_TOKEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("MESSAGE_TITLE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("MESSAGE_CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -f -X POST -d "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"token='),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_TOKEN")]),e._v("&user="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_USER")]),e._v("&title="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_TITLE")]),e._v("&message="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_CONTENT")]),e._v('&url=&priority=0"')]),e._v(" https://api.pushover.net/1/messages.json\n")])])]),t("h4",{attrs:{id:"example-push-notification-on-updates-available"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-push-notification-on-updates-available"}},[e._v("#")]),e._v(" Example: Push Notification on Updates Available")]),e._v(" "),t("p",[e._v("If you set up automatic updates using the "),t("code",[e._v("unattended-upgrades")]),e._v(" and "),t("code",[e._v("update-nofifier")]),e._v(" packages, you may want to receive a push notification when there are updates available for your node.\nA potential way to do this is to create a script in "),t("code",[e._v("~/update-notifier.sh")]),e._v(" and to trigger it daily at 9:00 using "),t("code",[e._v("crontab")]),e._v(".")]),e._v(" "),t("p",[e._v("To do this, first create the script by running:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" ~/update-notifier.sh\n")])])]),t("p",[e._v("Then paste the following script:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[e._v("#!/bin/bash")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_TOKEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NODE_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"$(rocketpool node status | grep -Po "(?<=The node )(0x[A-Za-z0-9]{40})"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"\nEXPLORER_URL=https://beaconcha.in/validators/eth1deposits?q=\n#EXPLORER_URL=https://rocketscan.dev/node/\n#EXPLORER_URL=https://www.rp-metrics-dashboard.com/dashboard/MAINNET/\nNOTIFICATION_URL="')]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$EXPLORER_URL")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$NODE_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("\"\n\n# Check if the update-notifier file is showing updates available\nif cat /var/lib/update-notifier/updates-available | grep -Pq '^(?!0)[0-9]* updates can be applied'; then\n\n\n   MESSAGE_TITLE=\"")]),e._v("⚠️ Rocket Pool "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("node")]),e._v(" system updates available"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"\n   MESSAGE_CONTENT="')]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /var/lib/update-notifier/updates-available "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" -P "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'^(?!0)[0-9]* updates can be applied'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"\n\nelse\n\n   MESSAGE_TITLE="')]),e._v("✅ Rocket Pool "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("node")]),e._v(" system up to "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("date")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"\n   MESSAGE_CONTENT="')]),e._v("No system updates available"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"\n\nfi\n\ncurl -f -X POST -d "')]),e._v("token"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_TOKEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_TITLE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$NOTIFICATION_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("priority")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v('" https://api.pushover.net/1/messages.json\n\n')])])]),t("p",[e._v("Next, run the following command to mark the script as executable:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" u+x ~/update-notifier.sh\n")])])]),t("p",[e._v("Now run the following command to open your crontab:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("crontab")]),e._v(" -e\n")])])]),t("p",[e._v("Then use the arrow keys to scroll down, and add the line "),t("code",[e._v("* 9 * * * ~/update-notifier.sh")]),e._v(" so the file looks like this:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Edit this file to introduce tasks to be run by cron.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Each task to run has to be defined through a single line")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# indicating with different fields when the task will be run")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# and what command to run for the task")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# To define the time you can provide concrete values for")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# minute (m), hour (h), day of month (dom), month (mon),")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# and day of week (dow) or use '*' in these fields (for 'any').")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Notice that tasks will be started based on the cron's system")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# daemon's notion of time and timezones.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Output of the crontab jobs (including errors) is sent through")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# email to the user the crontab file belongs to (unless redirected).")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For example, you can run a backup of all your user accounts")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# at 5 a.m every week with:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For more information see the manual pages of crontab(5) and cron(8)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# m h  dom mon dow   command")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# This like triggers at 9 AM local time")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# to configure your own times, refer to https://crontab.guru/")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("9")]),e._v(" * * * ~/update-notifier.sh\n")])])]),t("p",[e._v("The press "),t("code",[e._v("control+x")]),e._v(" to exit and press "),t("code",[e._v("Y")]),e._v(" when asked whether you want to save your changes.")]),e._v(" "),t("p",[e._v("You should now receive a notification at 09:00 local time if you have updates.\nYou can manually run the script by typing this in your terminal:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("~/update-notifier.sh\n")])])]),t("h4",{attrs:{id:"example-get-notified-when-your-apc-ups-daemon-activates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-get-notified-when-your-apc-ups-daemon-activates"}},[e._v("#")]),e._v(" Example: Get Notified when your APC UPS Daemon Activates")]),e._v(" "),t("p",[e._v("Some home stakers are using an Uninterruptible power supply with the "),t("code",[e._v("apcupsd")]),e._v(" utility to make sure their node shuts down gracefully if their power goes out.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("apcupsd")]),e._v(" utility uses the "),t("code",[e._v("apccontrol")]),e._v(" script to manage its logic, thus it is possible to monitor the activity of this daemon by editing the "),t("code",[e._v("/etc/apcupsd/apccontrol")]),e._v(" file.\nTo do this, run:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /etc/apcupsd/apccontrol\n")])])]),t("p",[e._v("Then at the top of the line add the following code so the file looks like this:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("PUSHOVER_TOKEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("MESSAGE_TITLE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"UPS Daemon called"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("MESSAGE_CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"called with: '),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v('"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -f -X POST -d "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"token='),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_TOKEN")]),e._v("&user="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$PUSHOVER_USER")]),e._v("&title="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_TITLE")]),e._v("&message="),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$MESSAGE_CONTENT")]),e._v('&url=&priority=0"')]),e._v(" https://api.pushover.net/1/messages.json\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Copyright (C) 1999-2002 Riccardo Facchetti <riccardo@master.oasi.gpa.it>")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# platforms/apccontrol.  Generated from apccontrol.in by configure.")]),e._v("\n")])])]),t("p",[e._v('This will send you a push notification whenever your UPS daemon takes action, includion periodic "self test" functionality.')])])}),[],!1,null,null,null);t.default=o.exports}}]);